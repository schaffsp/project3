(this.webpackJsonpproject3=this.webpackJsonpproject3||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),s=n.n(r),o=(n(21),n(22),n(3)),i=Object.freeze({LoadChains:"LoadChains",LoadRestaurants:"LoadRestaurants",LoadLocations:"LoadLocations",ShowProgress:"ShowProgress",HideProgress:"HideProgress",SelectRestaurant:"SelectRestaurant",LoadLatitude:"LoadLatitude",LoadLongitude:"LoadLongitude",LoadMeasurements:"LoadMeasurements"});function u(){return function(e){e(l()),fetch("https://project2.schafftsp.me:8443/chains").then((function(e){return e.json()})).then((function(t){var n;e((n=t,{type:i.LoadChains,payload:n})),e(h())}))}}function d(e){return function(t){t(l()),fetch("https://project2.schafftsp.me:8443/restaurants/"+e).then((function(e){return e.json()})).then((function(e){var n;t((n=e,{type:i.LoadLocations,payload:n})),t(h())}))}}function j(e){return function(t){t(l()),fetch("https://project2.schafftsp.me:8443/measurement/"+e).then((function(e){return e.json()})).then((function(e){var n;t((n=e,{type:i.LoadMeasurements,payload:n})),t(h())}))}}function l(){return{type:i.ShowProgress,payload:!0}}function h(){return{type:i.HideProgress,payload:!1}}n(29),n(14);var b=n(1),f=function(){var e=Object(o.c)((function(e){return e.chains})),t=Object(o.c)((function(e){return e.chainLoaded})),n=Object(o.c)((function(e){return e.isProgressing})),c=Object(o.b)();return Object(a.useEffect)((function(){c(u())}),[c]),Object(b.jsxs)("div",{children:[n&&Object(b.jsx)("div",{className:"spinner"}),t&&e.results.map((function(e){return Object(b.jsxs)("a",{href:"/".concat(e[0]),className:"Restaurant-Component",children:[Object(b.jsxs)("h2",{children:[e[1]," > ",Object(b.jsx)("span",{className:"Restaurant-Phone",children:e[2]})," "]}),Object(b.jsx)("h3",{children:"View locations"})]})}))]})},O=n(2),m=function(){var e=Object(o.c)((function(e){return e.locations})),t=Object(o.c)((function(e){return e.isProgressing})),n=Object(o.c)((function(e){return e.locationsLoaded})),c=Object(o.c)((function(e){return e.latitude})),r=Object(o.c)((function(e){return e.longitude})),s=Object(O.g)(),i=Object(o.b)();function u(e,t,n){t&n?e[0]=(e[0]+e[1])/2:e[1]=(e[0]+e[1])/2}function j(e){var t=1,n=[],a=[];n[0]=-90,n[1]=90,a[0]=-180,a[1]=180;for(var c=[16,8,4,2,1],r=0;r<e.length;r++)for(var s=e[r],o="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(s),i=0;i<5;i++){var d=c[i];t?(2,u(a,o,d)):(2,u(n,o,d)),t=!t}return n[2]=(n[0]+n[1])/2,a[2]=(a[0]+a[1])/2,{latitude:n,longitude:a}}function l(e,t,n,a){if(e=e[0],t=t[0],e==n&&t==a)return 0;var c=Math.PI*e/180,r=Math.PI*n/180,s=t-a,o=Math.PI*s/180,i=Math.sin(c)*Math.sin(r)+Math.cos(c)*Math.cos(r)*Math.cos(o);return i>1&&(i=1),(i=60*(i=180*(i=Math.acos(i))/Math.PI)*1.1515).toFixed(1)}function h(e){var t=j(e),n=t.latitude[0].toFixed(2),a=t.longitude[0].toFixed(2);fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(n,",").concat(a,"&key=AIzaSyC-GnsYOSBo7-JcT7e83IQl9QKFuwVokD0")).then((function(e){return e.json()})).then((function(t){document.getElementById(e).textContent=t.results[0].formatted_address}))}return Object(a.useEffect)((function(){i(d(s.chain_id))}),[i]),Object(b.jsxs)("div",{children:[t&&Object(b.jsx)("div",{className:"spinner"}),n&&e.results.map((function(e){return Object(b.jsxs)("a",{href:"".concat(s.chain_id,"/").concat(e[0]),className:"Restaurant-Component",children:[Object(b.jsxs)("h2",{children:[l(j(e[1]).latitude,j(e[1]).longitude,c,r)," mi --\x3e ",Object(b.jsx)("span",{id:e[1],children:h(e[1])})]}),Object(b.jsx)("h3",{children:"View wait times"})]})})),Object(b.jsx)("a",{className:"backButton",href:"/",children:"Back"})]})},p=n(7),g=(n(31),function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(p.a)(r,2),i=s[0],u=s[1],d=Object(o.c)((function(e){return e.measurements})),l=Object(o.c)((function(e){return e.isProgressing})),h=Object(o.c)((function(e){return e.measurementsLoaded})),f=Object(O.g)(),m=Object(o.b)();Object(a.useEffect)((function(){m(j(f.rest_id))}),[m]);var g=[];function x(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime(),c=Math.floor(a/1e3/60/60);a-=1e3*c*60*60;var r=Math.floor(a/1e3/60),s=""+n.getDate(),o=n.getDay(),i=n.getMonth(),u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o]+", "+["January","Febuary","March","April","May","June","July","August","September","October","November","December"][i]+" "+s+": ";return u+=0==c?"":c+" hours, ",u+=r+" mins",g.push(60*c+r),u}return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("h3",{children:"Submit your own measurement:"}),Object(b.jsx)("div",{className:"innerbox",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!=n&&""!=i||alert("Please complete the form before submitting."),console.log("Form submitted: ".concat(n,", ").concat(i))},children:[Object(b.jsx)("label",{for:"entrytime",children:"Time entered: "}),Object(b.jsx)("input",{onChange:function(e){return c(e.target.value)},value:n,type:"datetime-local",id:"entrytime",name:"entrytime"}),Object(b.jsx)("label",{for:"exittime",children:"Time exited: "}),Object(b.jsx)("input",{onChange:function(e){return u(e.target.value)},value:i,type:"datetime-local",id:"exittime",name:"exittime"}),Object(b.jsx)("button",{type:"submit",children:"Submit"})]})})]}),Object(b.jsxs)("div",{className:"box bottom-box",children:[l&&Object(b.jsx)("div",{className:"spinner"}),h&&0==d.results.length&&Object(b.jsx)("h2",{children:"There are no avaliable measurements for this location."}),h&&d.results.length>0&&d.results.map((function(e){return Object(b.jsx)("h3",{children:x(e[2],e[3])})}))]}),Object(b.jsx)("a",{className:"backButton",href:"/".concat(f.chain_id),children:"Back"}),Object(b.jsx)("a",{className:"backButton",href:"/",children:"Home"})]})});var x=function(){var e=Object(o.b)();function t(t){var n,a;e((n=t.coords.latitude,{type:i.LoadLatitude,payload:n})),e((a=t.coords.longitude,{type:i.LoadLongitude,payload:a}))}return navigator.geolocation?navigator.geolocation.getCurrentPosition(t):alert("Geolocation is not supported by this browser."),Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{className:"App-Container",children:[Object(b.jsx)("h1",{children:"Drive Through App"}),Object(b.jsxs)(O.c,{children:[Object(b.jsx)(O.a,{path:"/",element:Object(b.jsx)(f,{})}),Object(b.jsx)(O.a,{path:"/:chain_id",element:Object(b.jsx)(m,{})}),Object(b.jsx)(O.a,{path:"/:chain_id/:rest_id",element:Object(b.jsx)(g,{})})]})]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},L=n(11),v=n(4),P=n(13),M=n(16);var S=Object(P.b)((function(e,t){switch(t.type){case i.LoadChains:return Object(v.a)(Object(v.a)({},e),{},{chains:t.payload,chainLoaded:!0});case i.LoadLocations:return Object(v.a)(Object(v.a)({},e),{},{locations:t.payload,locationsLoaded:!0});case i.LoadMeasurements:return Object(v.a)(Object(v.a)({},e),{},{measurements:t.payload,measurementsLoaded:!0});case i.LoadLatitude:return Object(v.a)(Object(v.a)({},e),{},{latitude:t.payload});case i.LoadLongitude:return Object(v.a)(Object(v.a)({},e),{},{longitude:t.payload});case i.ShowProgress:return Object(v.a)(Object(v.a)({},e),{},{isProgressing:!0});case i.HideProgress:return Object(v.a)(Object(v.a)({},e),{},{isProgressing:!1});case i.SelectRestaurant:return Object(v.a)(Object(v.a)({},e),{},{selectedRestaurant:t.payload});default:return e}}),{chains:[],locations:[],measurements:[],selectedRestaurant:null,isProgressing:!1,chainLoaded:!1,locationsLoaded:!1,measurementsLoaded:!1,latitude:null,longitude:null},Object(P.a)(M.a));s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(o.a,{store:S,children:Object(b.jsx)(L.a,{children:Object(b.jsx)(x,{})})})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.2d2e137d.chunk.js.map