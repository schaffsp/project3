(this.webpackJsonpproject3=this.webpackJsonpproject3||[]).push([[0],{15:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(10),s=n.n(o),r=(n(24),n(25),n(3)),i=n(4),u=n(17),d=Object.freeze({LoadChains:"LoadChains",LoadRestaurants:"LoadRestaurants",LoadLocations:"LoadLocations",ShowProgress:"ShowProgress",HideProgress:"HideProgress",SelectRestaurant:"SelectRestaurant",LoadLatitude:"LoadLatitude",LoadLongitude:"LoadLongitude",LoadMeasurements:"LoadMeasurements",AddMeasurement:"AddMeasurement"});function l(){return function(e){e(m()),fetch("https://project2.schafftsp.me:8443/chains").then((function(e){return e.json()})).then((function(t){var n;e((n=t,{type:d.LoadChains,payload:n})),e(f())}))}}function j(e,t,n){var a={rest_id:e,meas_time_in:t,meas_time_out:n,meas_drive_through:1};return function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("https://project2.schafftsp.me:8443/measurement/",t).then(u.assertResponse).then((function(e){return e.json()})).then((function(t){var n;t.ok&&e((n=Object(i.a)({},a),{type:d.AddMeasurement,payload:n}))})).catch((function(e){console.log("error:",e)}))}}function h(e){return function(t){t(m()),fetch("https://project2.schafftsp.me:8443/restaurants/"+e).then((function(e){return e.json()})).then((function(e){var n;t((n=e,{type:d.LoadLocations,payload:n})),t(f())}))}}function b(e){return function(t){t(m()),fetch("https://project2.schafftsp.me:8443/measurement/"+e).then((function(e){return e.json()})).then((function(e){var n;t((n=e,{type:d.LoadMeasurements,payload:n})),t(f())}))}}function m(){return{type:d.ShowProgress,payload:!0}}function f(){return{type:d.HideProgress,payload:!1}}n(32),n(15);var O=n(1),p=function(){var e=Object(r.c)((function(e){return e.chains})),t=Object(r.c)((function(e){return e.chainLoaded})),n=Object(r.c)((function(e){return e.isProgressing})),c=Object(r.b)();return Object(a.useEffect)((function(){c(l())}),[c]),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"subtext",children:"Click on one of the chains below to view locations."}),n&&Object(O.jsx)("div",{className:"spinner"}),t&&e.results.map((function(e){return Object(O.jsxs)("a",{href:"/".concat(e[0]),className:"Restaurant-Component",children:[Object(O.jsxs)("h2",{children:[e[1]," > ",Object(O.jsx)("span",{className:"Restaurant-Phone",children:e[2]})," "]}),Object(O.jsx)("h3",{children:"View locations"})]})}))]})},g=n(2),x=function(){var e=Object(r.c)((function(e){return e.locations})),t=Object(r.c)((function(e){return e.isProgressing})),n=Object(r.c)((function(e){return e.locationsLoaded})),c=Object(r.c)((function(e){return e.latitude})),o=Object(r.c)((function(e){return e.longitude})),s=Object(g.g)(),i=Object(r.b)();function u(e,t,n){t&n?e[0]=(e[0]+e[1])/2:e[1]=(e[0]+e[1])/2}function d(e){var t=1,n=[],a=[];n[0]=-90,n[1]=90,a[0]=-180,a[1]=180;for(var c=[16,8,4,2,1],o=0;o<e.length;o++)for(var s=e[o],r="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(s),i=0;i<5;i++){var d=c[i];t?(2,u(a,r,d)):(2,u(n,r,d)),t=!t}return n[2]=(n[0]+n[1])/2,a[2]=(a[0]+a[1])/2,{latitude:n,longitude:a}}function l(e,t,n,a){if(e=e[0],t=t[0],e==n&&t==a)return 0;var c=Math.PI*e/180,o=Math.PI*n/180,s=t-a,r=Math.PI*s/180,i=Math.sin(c)*Math.sin(o)+Math.cos(c)*Math.cos(o)*Math.cos(r);return i>1&&(i=1),(i=60*(i=180*(i=Math.acos(i))/Math.PI)*1.1515).toFixed(1)}function j(e){var t=d(e),n=t.latitude[0].toFixed(2),a=t.longitude[0].toFixed(2);fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(n,",").concat(a,"&key=AIzaSyC-GnsYOSBo7-JcT7e83IQl9QKFuwVokD0")).then((function(e){return e.json()})).then((function(t){document.getElementById(e).textContent=t.results[0].formatted_address}))}return Object(a.useEffect)((function(){i(h(s.chain_id))}),[i]),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"subtext",children:"Click on a location to view information about wait times, or to post your own."}),t&&Object(O.jsx)("div",{className:"spinner"}),n&&e.results.map((function(e){return Object(O.jsxs)("a",{href:"".concat(s.chain_id,"/").concat(e[0]),className:"Restaurant-Component",children:[Object(O.jsxs)("h2",{children:[l(d(e[1]).latitude,d(e[1]).longitude,c,o)," mi --\x3e ",Object(O.jsx)("span",{id:e[1],children:j(e[1])})]}),Object(O.jsx)("h3",{children:"View wait times"})]})})),Object(O.jsx)("a",{className:"backButton",href:"/",children:"Back"})]})},y=n(7),v=(n(34),function(){var e=Object(a.useState)(""),t=Object(y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(y.a)(o,2),i=s[0],u=s[1],d=Object(r.c)((function(e){return e.measurements})),l=Object(r.c)((function(e){return e.isProgressing})),h=Object(r.c)((function(e){return e.measurementsLoaded})),m=Object(g.g)(),f=Object(r.b)();Object(a.useEffect)((function(){f(b(m.rest_id))}),[f]);var p=[];function x(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime(),c=Math.floor(a/1e3/60/60);a-=1e3*c*60*60;var o=Math.floor(a/1e3/60),s=""+n.getDate(),r=n.getDay(),i=n.getMonth(),u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r]+", "+["January","Febuary","March","April","May","June","July","August","September","October","November","December"][i]+" "+s+": ";return u+=0==c?"":c+" hour(s), ",u+=o+" min(s)",p.push(60*c+o),u}return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("h3",{children:"Submit your own measurement:"}),Object(O.jsx)("div",{className:"innerbox",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!=n&&""!=i||alert("Please complete the form before submitting."),f(j(m.rest_id,n,i)),console.log("Form submitted: ".concat(n,", ").concat(i))},children:[Object(O.jsx)("label",{for:"entrytime",children:"Time entered: "}),Object(O.jsx)("input",{onChange:function(e){return c(e.target.value)},value:n,type:"datetime-local",id:"entrytime",name:"entrytime"}),Object(O.jsx)("label",{for:"exittime",children:"Time exited: "}),Object(O.jsx)("input",{onChange:function(e){return u(e.target.value)},value:i,type:"datetime-local",id:"exittime",name:"exittime"}),Object(O.jsx)("button",{type:"submit",children:"Submit"})]})})]}),Object(O.jsxs)("div",{className:"box bottom-box",children:[l&&Object(O.jsx)("div",{className:"spinner"}),h&&0==d.results.length&&Object(O.jsx)("h2",{children:"There are no avaliable measurements for this location."}),h&&d.results.length>0&&d.results.map((function(e){return Object(O.jsx)("h3",{children:x(e[2],e[3])})}))]}),Object(O.jsx)("a",{className:"backButton",href:"/".concat(m.chain_id),children:"Back"}),Object(O.jsx)("a",{className:"backButton",href:"/",children:"Home"})]})});var L=function(){var e=Object(r.b)();function t(t){var n,a;e((n=t.coords.latitude,{type:d.LoadLatitude,payload:n})),e((a=t.coords.longitude,{type:d.LoadLongitude,payload:a}))}return navigator.geolocation?navigator.geolocation.getCurrentPosition(t):alert("Geolocation is not supported by this browser."),Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("div",{className:"App-Container",children:[Object(O.jsx)("h1",{children:"Drive Through App"}),Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{path:"/",element:Object(O.jsx)(p,{})}),Object(O.jsx)(g.a,{path:"/:chain_id",element:Object(O.jsx)(x,{})}),Object(O.jsx)(g.a,{path:"/:chain_id/:rest_id",element:Object(O.jsx)(v,{})})]})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))},P=n(12),w=n(19),S=n(14),C=n(18);var N=Object(S.b)((function(e,t){switch(t.type){case d.LoadChains:return Object(i.a)(Object(i.a)({},e),{},{chains:t.payload,chainLoaded:!0});case d.LoadLocations:return Object(i.a)(Object(i.a)({},e),{},{locations:t.payload,locationsLoaded:!0});case d.LoadMeasurements:return Object(i.a)(Object(i.a)({},e),{},{measurements:t.payload,measurementsLoaded:!0});case d.LoadLatitude:return Object(i.a)(Object(i.a)({},e),{},{latitude:t.payload});case d.LoadLongitude:return Object(i.a)(Object(i.a)({},e),{},{longitude:t.payload});case d.ShowProgress:return Object(i.a)(Object(i.a)({},e),{},{isProgressing:!0});case d.HideProgress:return Object(i.a)(Object(i.a)({},e),{},{isProgressing:!1});case d.AddMeasurement:return Object(i.a)(Object(i.a)({},e),{},{measurements:[t.payload].concat(Object(w.a)(e.measurements))});case d.SelectRestaurant:return Object(i.a)(Object(i.a)({},e),{},{selectedRestaurant:t.payload});default:return e}}),{chains:[],locations:[],measurements:[],selectedRestaurant:null,isProgressing:!1,chainLoaded:!1,locationsLoaded:!1,measurementsLoaded:!1,latitude:null,longitude:null},Object(S.a)(C.a));s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(r.a,{store:N,children:Object(O.jsx)(P.a,{children:Object(O.jsx)(L,{})})})}),document.getElementById("root")),M()}},[[35,1,2]]]);
//# sourceMappingURL=main.3cfac0db.chunk.js.map